<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.3.1"/>
<title>Qualia: StaticAllocator Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">Qualia
   &#160;<span id="projectnumber">0.2</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.3.1 -->
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li class="current"><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="annotated.html"><span>Class&#160;List</span></a></li>
      <li><a href="classes.html"><span>Class&#160;Index</span></a></li>
      <li><a href="inherits.html"><span>Class&#160;Hierarchy</span></a></li>
      <li><a href="functions.html"><span>Class&#160;Members</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pub-attribs">Public Attributes</a> &#124;
<a href="#pro-methods">Protected Member Functions</a> &#124;
<a href="classStaticAllocator-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">StaticAllocator Class Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p><code>#include &lt;<a class="el" href="StaticAllocator_8h_source.html">StaticAllocator.h</a>&gt;</code></p>
<div class="dynheader">
Inheritance diagram for StaticAllocator:</div>
<div class="dyncontent">
<div class="center"><img src="classStaticAllocator__inherit__graph.png" border="0" usemap="#StaticAllocator_inherit__map" alt="Inheritance graph"/></div>
<map name="StaticAllocator_inherit__map" id="StaticAllocator_inherit__map">
<area shape="rect" id="node2" href="classAllocator.html" title="Allocator" alt="" coords="23,5,95,35"/></map>
<center><span class="legend">[<a href="graph_legend.html">legend</a>]</span></center></div>
<div class="dynheader">
Collaboration diagram for StaticAllocator:</div>
<div class="dyncontent">
<div class="center"><img src="classStaticAllocator__coll__graph.png" border="0" usemap="#StaticAllocator_coll__map" alt="Collaboration graph"/></div>
<map name="StaticAllocator_coll__map" id="StaticAllocator_coll__map">
<area shape="rect" id="node2" href="classAllocator.html" title="Allocator" alt="" coords="23,5,95,35"/></map>
<center><span class="legend">[<a href="graph_legend.html">legend</a>]</span></center></div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a7e904df1683aea75da65f433b50157c3"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classStaticAllocator.html#a7e904df1683aea75da65f433b50157c3">StaticAllocator</a> (unsigned char *<a class="el" href="classStaticAllocator.html#a3a64195e2b634b87ee4c262ce67d3866">buffer</a>, size_t size)</td></tr>
<tr class="separator:a7e904df1683aea75da65f433b50157c3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="inherit_header pub_methods_classAllocator"><td colspan="2" onclick="javascript:toggleInherit('pub_methods_classAllocator')"><img src="closed.png" alt="-"/>&#160;Public Member Functions inherited from <a class="el" href="classAllocator.html">Allocator</a></td></tr>
<tr class="memitem:aa025defb13e9a70b6dd7239aff4f9ed6 inherit pub_methods_classAllocator"><td class="memItemLeft" align="right" valign="top">virtual&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classAllocator.html#aa025defb13e9a70b6dd7239aff4f9ed6">~Allocator</a> ()</td></tr>
<tr class="separator:aa025defb13e9a70b6dd7239aff4f9ed6 inherit pub_methods_classAllocator"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-attribs"></a>
Public Attributes</h2></td></tr>
<tr class="memitem:a3a64195e2b634b87ee4c262ce67d3866"><td class="memItemLeft" align="right" valign="top">unsigned char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classStaticAllocator.html#a3a64195e2b634b87ee4c262ce67d3866">buffer</a></td></tr>
<tr class="separator:a3a64195e2b634b87ee4c262ce67d3866"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1a13fa231730af8fb1557c2a15c1bf06"><td class="memItemLeft" align="right" valign="top">size_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classStaticAllocator.html#a1a13fa231730af8fb1557c2a15c1bf06">bufferSize</a></td></tr>
<tr class="separator:a1a13fa231730af8fb1557c2a15c1bf06"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a01a786caeace93a4308db1b8f1784237"><td class="memItemLeft" align="right" valign="top">unsigned int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classStaticAllocator.html#a01a786caeace93a4308db1b8f1784237">bufferIdx</a></td></tr>
<tr class="separator:a01a786caeace93a4308db1b8f1784237"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a38216f31d27f9d38f6e5411d46b7bd0d"><td class="memItemLeft" align="right" valign="top">unsigned char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classStaticAllocator.html#a38216f31d27f9d38f6e5411d46b7bd0d">lastPtr</a></td></tr>
<tr class="separator:a38216f31d27f9d38f6e5411d46b7bd0d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aee105d3aa6b6480bd8e82d4487d848c4"><td class="memItemLeft" align="right" valign="top">unsigned int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classStaticAllocator.html#aee105d3aa6b6480bd8e82d4487d848c4">nLeaks</a></td></tr>
<tr class="separator:aee105d3aa6b6480bd8e82d4487d848c4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa6276acbd69767e8310802b22c770290"><td class="memItemLeft" align="right" valign="top">unsigned char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classStaticAllocator.html#aa6276acbd69767e8310802b22c770290">lastLeak</a></td></tr>
<tr class="separator:aa6276acbd69767e8310802b22c770290"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pro-methods"></a>
Protected Member Functions</h2></td></tr>
<tr class="memitem:a711b23637fef77c591d58fc5968e7a3d"><td class="memItemLeft" align="right" valign="top">virtual void *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classStaticAllocator.html#a711b23637fef77c591d58fc5968e7a3d">malloc</a> (size_t size)</td></tr>
<tr class="separator:a711b23637fef77c591d58fc5968e7a3d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a60aadf4ade6ea2e075586557d87fe7fa"><td class="memItemLeft" align="right" valign="top">virtual void *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classStaticAllocator.html#a60aadf4ade6ea2e075586557d87fe7fa">calloc</a> (size_t num, size_t size)</td></tr>
<tr class="separator:a60aadf4ade6ea2e075586557d87fe7fa"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a75d9c5498d915517b105603d8320a3d1"><td class="memItemLeft" align="right" valign="top">virtual void *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classStaticAllocator.html#a75d9c5498d915517b105603d8320a3d1">realloc</a> (void *ptr, size_t size)</td></tr>
<tr class="separator:a75d9c5498d915517b105603d8320a3d1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa4bdfecdf3b2ef2588aae288ae5ff0f6"><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classStaticAllocator.html#aa4bdfecdf3b2ef2588aae288ae5ff0f6">free</a> (void *ptr)</td></tr>
<tr class="separator:aa4bdfecdf3b2ef2588aae288ae5ff0f6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae478b942de73b6762218cb611de5610b"><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classStaticAllocator.html#ae478b942de73b6762218cb611de5610b">freeAll</a> ()</td></tr>
<tr class="separator:ae478b942de73b6762218cb611de5610b"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>An allocator (see <a class="el" href="classAllocator.html">Allocator</a>) that "allocates" memory based on a pre-allocated static memory pool/buffer. Useful to manage memory on architectures that don't support well dynamic allocation (such as AVR-based systems). On such systems, it is usually recommended NOT to use dynamic allocation to avoid problems. <a class="el" href="classStaticAllocator.html">StaticAllocator</a> makes sure the memory is allocated from the stack rather than from the heap.</p>
<p>WARNING: Calling <a class="el" href="classStaticAllocator.html#aa4bdfecdf3b2ef2588aae288ae5ff0f6">StaticAllocator::free()</a> does NOT free the pointer at all. You should in fact NEVER have to call that function (because the memory then becomes completely useless). The object keeps track of any calls to <a class="el" href="classStaticAllocator.html#aa4bdfecdf3b2ef2588aae288ae5ff0f6">free()</a> by incrementing the nLeaks counter. The variable lastLeak is also updated with the value of the pointer on which <a class="el" href="classStaticAllocator.html#aa4bdfecdf3b2ef2588aae288ae5ff0f6">free()</a> was called last.</p>
<p>NOTE: An alternative is to tune the heap start and end in malloc. <a href="http://www.nongnu.org/avr-libc/user-manual/malloc.html">http://www.nongnu.org/avr-libc/user-manual/malloc.html</a></p>
<p>Usage: </p>
<div class="fragment"><div class="line"><span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> mybuffer[100];</div>
<div class="line"><a class="code" href="classStaticAllocator.html">StaticAllocator</a> alloc(mybuffer, 100);</div>
<div class="line"><span class="keywordtype">int</span>* myarray = (<span class="keywordtype">int</span>*)alloc.malloc(10*<span class="keyword">sizeof</span>(<span class="keywordtype">int</span>));</div>
<div class="line">Object* myobject = <span class="keyword">new</span>(alloc.malloc(<span class="keyword">sizeof</span>(Object)) Object(1,2);</div>
</div><!-- fragment --> </div><h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a class="anchor" id="a7e904df1683aea75da65f433b50157c3"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">StaticAllocator::StaticAllocator </td>
          <td>(</td>
          <td class="paramtype">unsigned char *&#160;</td>
          <td class="paramname"><em>buffer</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>size</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a class="anchor" id="a60aadf4ade6ea2e075586557d87fe7fa"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void * StaticAllocator::calloc </td>
          <td>(</td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>num</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>size</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Reimplemented from <a class="el" href="classAllocator.html#a6d99faf795395fb017ec5abe5e366f40">Allocator</a>.</p>

</div>
</div>
<a class="anchor" id="aa4bdfecdf3b2ef2588aae288ae5ff0f6"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void StaticAllocator::free </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>ptr</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Reimplemented from <a class="el" href="classAllocator.html#ae2a7bfc7386a74f600cc5d8233f42509">Allocator</a>.</p>

</div>
</div>
<a class="anchor" id="ae478b942de73b6762218cb611de5610b"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void StaticAllocator::freeAll </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a class="anchor" id="a711b23637fef77c591d58fc5968e7a3d"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void * StaticAllocator::malloc </td>
          <td>(</td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>size</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Reimplemented from <a class="el" href="classAllocator.html#ae4f4b525cc6c677b45a9f50f81ab9f93">Allocator</a>.</p>

</div>
</div>
<a class="anchor" id="a75d9c5498d915517b105603d8320a3d1"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void * StaticAllocator::realloc </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>ptr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>size</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Reimplemented from <a class="el" href="classAllocator.html#abbb6950614e0dc2cb6833054e374ebd6">Allocator</a>.</p>

</div>
</div>
<h2 class="groupheader">Member Data Documentation</h2>
<a class="anchor" id="a3a64195e2b634b87ee4c262ce67d3866"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">unsigned char* StaticAllocator::buffer</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a class="anchor" id="a01a786caeace93a4308db1b8f1784237"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">unsigned int StaticAllocator::bufferIdx</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a class="anchor" id="a1a13fa231730af8fb1557c2a15c1bf06"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">size_t StaticAllocator::bufferSize</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a class="anchor" id="aa6276acbd69767e8310802b22c770290"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">unsigned char* StaticAllocator::lastLeak</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a class="anchor" id="a38216f31d27f9d38f6e5411d46b7bd0d"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">unsigned char* StaticAllocator::lastPtr</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a class="anchor" id="aee105d3aa6b6480bd8e82d4487d848c4"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">unsigned int StaticAllocator::nLeaks</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li>src/qualia/core/<a class="el" href="StaticAllocator_8h_source.html">StaticAllocator.h</a></li>
<li>src/qualia/core/<a class="el" href="StaticAllocator_8cpp.html">StaticAllocator.cpp</a></li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Fri Oct 11 2013 18:57:49 for Qualia by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.3.1
</small></address>
</body>
</html>
